<!DOCTYPE html>
<html lang=" en "><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Cheuk Ting Ho | Building the Open-source Community</title><!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="I Have to Confess I Still Love Pandas üêº" />
<meta name="author" content="Cheuk Ting Ho" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="About my love hate relationship with Pandas" />
<meta property="og:description" content="About my love hate relationship with Pandas" />
<link rel="canonical" href="https://cheuk.dev/2022/09/12/love-pandas/" />
<meta property="og:url" content="https://cheuk.dev/2022/09/12/love-pandas/" />
<meta property="og:site_name" content="Building the Open-source Community" />
<meta property="og:image" content="https://cheuk.dev/assets/images/trojan-horse.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-12T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://cheuk.dev/assets/images/trojan-horse.png" />
<meta property="twitter:title" content="I Have to Confess I Still Love Pandas üêº" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Cheuk Ting Ho"},"dateModified":"2022-09-12T00:00:00+00:00","datePublished":"2022-09-12T00:00:00+00:00","description":"About my love hate relationship with Pandas","headline":"I Have to Confess I Still Love Pandas üêº","image":"https://cheuk.dev/assets/images/trojan-horse.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://cheuk.dev/2022/09/12/love-pandas/"},"url":"https://cheuk.dev/2022/09/12/love-pandas/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/app.min.css" />
  <link rel="stylesheet" href="/assets/css/pages.css" />

  <!--
  <link rel="shortcut icon" type="image/x-icon" href="">
  -->

<!-- favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" />
  <link rel="manifest" href="/favicon/site.webmanifest" />
<!-- favicon -->

<!-- indieweb links -->
  <link rel="authorization_endpoint" href="https://indieauth.com/auth" />
  <link rel="token_endpoint" href="https://tokens.indieauth.com/token" />
  <link rel="webmention" href="https://webmention.io/cheuk.dev/webmention" />
  <link rel="pingback" href="https://webmention.io/cheuk.dev/xmlrpc" />
<!-- indieweb links -->

<!-- Font Awesome Solid + Brands -->
<link href="/assets/fontawesome/css/fontawesome.css" rel="stylesheet">
<link href="/assets/fontawesome/css/brands.css" rel="stylesheet">
<link href="/assets/fontawesome/css/solid.css" rel="stylesheet">
<!-- Font Awesome Solid + Brands --></head>
<body id="page-top"><nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img src="/images/32px-home.png" alt="back to home"></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/#projects">Projects</a>
                </li>
                <li>
                    <a href="/#articles">Articles</a>
                </li>
                <li>
                    <a href="/#meetups">Events</a>
                </li>
                <li>
                    <a href="/#videos">Videos</a>
                </li>
                <li>
                    <a href="/#workshops">Workshops</a>
                </li>
                <li>
                    <a class="" href="/public-speaking.html">Public Speaking</a>
                </li>
                <li>
                    <a class="" href="https://github.com/sponsors/Cheukting" target="_blank">‚ô°Sponsor</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>
<div class="container header-contianer h-card">
  <div class="row">
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8 header-left">
      <img class="banner-logo u-photo" src="/images/logo.png" alt="website banner">
        <!----
      <h1>Cheuk Ting Ho</h1>
      <h2>Building the Open-source Community</h2>
      --->
    </div>
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 header-right">
      <ul class="icons no-print"><li>
            <a target="_blank" href="https://github.com/Cheukting" class="button button--sacnite button--round-l u-url" rel="me">
              <i class="fa-brands fa-github" title="Github link"></i>
            </a>
          </li><li>
            <a target="_blank" href="https://www.linkedin.com/in/cheukting-ho" class="button button--sacnite button--round-l u-url">
              <i class="fa-brands fa-linkedin" title="Linkedin link"></i>
            </a>
          </li><li>
            <a target="_blank" href="https://twitter.com/cheukting_ho" class="button button--sacnite button--round-l u-url" rel="me">
              <i class="fa-brands fa-twitter" title="Twitter link"></i>
            </a>
          </li><li>
            <a target="_blank" href="https://fosstodon.org/@cheukting_ho" class="button button--sacnite button--round-l u-url" rel="me">
              <i class="fa-brands fa-mastodon" title="Mastodon profile link"></i>
            </a>
          </li><li>
            <a target="_blank" href="https://www.youtube.com/%40cheuktingho" class="button button--sacnite button--round-l u-url" rel="me">
              <i class="fa-brands fa-youtube" title="Youtube link"></i>
            </a>
          </li></ul></div>
  </div>
</div>
<main class="page-content" aria-label="Content">
<div class="post container intro-container">
  <article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting" class="h-entry">
    <div class="post__header section-padding">
      <div class="grid-large">
        <h2 itemprop="name headline" class="p-name">I Have to Confess I Still Love Pandas üêº</h2>

        <time class="post__date dt-published" datetime="2022-09-12T00:00:00+00:00" itemprop="datePublished">12 Sep 2022</time>
      </div>
    </div>

    
      <div class="post__img u-photo">
        <div>
          <figure class="absolute-bg" style="background-image: url('/assets/images/trojan-horse.png');"></figure>
        </div>
      </div>
    

    <div class="post__content section-padding">
      <div class="grid-large">
        <div id="markdown" itemprop="articleBody" class="e-content">
          <p>A few year ago, I was still a Data Scientist, Pandas was a tool that I have to use everyday. Soon time passes and I have used Pandas without googling and seems to forget the struggle I had when I was using Pandas for the first time.</p>

<p>I hope someone can tell me a little bit more when I start using Pandas so I can have a better understanding of it. So here are few things that I will tell my previous self and those of you who are starting to use Pandas.</p>

<h2 id="what-about-large-datasets">What about Large Datasets</h2>

<p>We all know that Pandas (and Python) is using in memory, and handeling large amount of data is not what it does best. To minimise the problem, we can try a few tricks.</p>

<ul>
  <li>If you know the type of the csv, try using <code class="highlighter-rouge">dtype</code> optionl:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">path_movies</span><span class="p">),</span>
            <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s">'movieId'</span><span class="p">,</span> <span class="s">'title'</span><span class="p">],</span>
            <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s">'movieId'</span><span class="p">:</span> <span class="s">'int32'</span><span class="p">,</span> <span class="s">'title'</span><span class="p">:</span> <span class="s">'str'</span><span class="p">})</span>
</code></pre></div></div>

<p>Because we don‚Äôt need <code class="highlighter-rouge">float64</code> or <code class="highlighter-rouge">int64</code> (which are the defaults) all the time. This can also minimise the guessing and errors that may follow if the type of the column is input wrongly.</p>

<ul>
  <li>If it possible, processing in chunks:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">chunksize</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">6</span>
<span class="k">with</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="n">chunksize</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="n">process</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</code></pre></div></div>

<p>This can make the io to databases and/or disk better. If you need speed, this can also be converted as concurrent operations, but we are not diving into details here.</p>

<h2 id="what-about-apis-that-are-similar-or-do-the-exact-same-things">What about APIs that are similar or do the exact same things?</h2>

<p>One thing about APIs in Pandas is that, there are multiple ways of doing things, like:</p>

<ul>
  <li>Getting a column: <code class="highlighter-rouge">df.user</code> vs <code class="highlighter-rouge">df['user']</code></li>
  <li>Sum, min, max etc: <code class="highlighter-rouge">sum(df)</code> vs <code class="highlighter-rouge">df.sum()</code></li>
  <li>Missing values: <code class="highlighter-rouge">isnull</code> vs <code class="highlighter-rouge">isna</code></li>
</ul>

<p>The questions is: Which one is better? which one should I use?</p>

<p>Here is my answer (and it is a personal opnion) - For the cases above, I will choose the later over the former. Why? There are reasons:</p>

<ul>
  <li>Using square brackets (<code class="highlighter-rouge">[]</code>) to reference a column because there are column names that have spaces in it and it will not work for the <code class="highlighter-rouge">.</code></li>
  <li>
    <p>using the numpy defined operation function orver the general Python build in fuction because it is optimise for that task</p>
  </li>
  <li>using the more commonly used method instead of the less popular ones (or old one) to advoid funciton being depricated</li>
</ul>

<p>This requires some understanding of the ecosystem of Pandas to make the decision.</p>

<h2 id="what-about-the-nested-indexes">What about the nested indexes</h2>

<p>Nested indexes is a double edge sward in Pandas in my opnion. In some cases it is good that we can have multiple layers of index and columns but most of the time it just make data science operations more complicated.</p>

<p>As for beginners, some time they maybe taken by supprise that after some operations (like groupby, aggrations and pivot_table etc) will end up with nested columns.</p>

<p>One key thing to remember is, use <code class="highlighter-rouge">reset_index()</code> after those operations. Then nested structures will be flattened and columns will be renamed with the‚Ä¶</p>

<h2 id="how-about-quick-data-manipulation">How about quick data manipulation</h2>

<p>Pandas offers ways to use SQL queries to manipulate the DataFrame, which can be very handy for those who are used to SQL queries and this can also be used to preview what you will get if you have a small sample of a huge data in database as a DataFrame.</p>

<p>Here is my presentation slides:</p>

<iframe src="https://slides.com/cheukting_ho/trojan-source/embed?style=transparent&amp;share=hidden" width="576" height="420" title="Trojan Source" scrolling="no" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

        </div>

        <br /><br />
<h2 class="post__social">Share this article</h2>
<ul class="post__social">
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://cheuk.dev/2022/09/12/love-pandas/" target="_blank"><i class="fa fa-facebook"></i></a></li>
  <li><a href="https://twitter.com/intent/tweet?&text=I Have to Confess I Still Love Pandas üêº+https://cheuk.dev/2022/09/12/love-pandas/+by+Cheuk Ting Ho" target="_blank"><i class="fa fa-twitter"></i></a></li>
  <!------
  <li><a href="https://plus.google.com/share?url=https://cheuk.dev/2022/09/12/love-pandas/" target="_blank"><i class="fa fa-google-plus"></i></a></li>
  ------->
  <li><a href="https://www.linkedin.com/shareArticle?mini=true&source=I Have to Confess I Still Love Pandas üêº&summary=About my love hate relationship with Pandas&url=https://cheuk.dev/2022/09/12/love-pandas/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
  <!------
  <li><a href="https://www.stumbleupon.com/badge/?url=https://cheuk.dev/2022/09/12/love-pandas/" target="_blank"><i class="fa fa-stumbleupon"></i></a></li>
  ------->
  <li><a href="https://www.reddit.com/submit?url=https://cheuk.dev/2022/09/12/love-pandas/" target="_blank"><i class="fa fa-reddit-alien"></i></a></li>
  <li><a href="https://www.tumblr.com/share/link?url=https://cheuk.dev/2022/09/12/love-pandas/" target="_blank"><i class="fa fa-tumblr"></i></a></li>
  <li><a href="https://www.pinterest.com/pin/create/link/?description=About my love hate relationship with Pandas&media=https://cheuk.dev/assets/images/trojan-horse.png&url=https://cheuk.dev/2022/09/12/love-pandas/" target="_blank"><i class="fa fa-pinterest"></i></a></li>
</ul>
<a href="https://cheuk.dev/2022/09/12/love-pandas/" class="post__social u-url">https://cheuk.dev/2022/09/12/love-pandas/</a>

      </div>
    </div>

    <div class="grid">
      <div class="post__webmention">
  <div id="webmentions" ></div>
</div>

    </div>

    <!-- Everything inside the #author tags pulls data from the author -->
    
      <div class="section-padding--none">
        <div class="grid">
          <hr class="sep"/>
        </div>
      </div>

      <div class="section-padding">
        <div class="grid p-author h-card">
          
            
            
              <span class="post__author">About
            
            <a href="https://cheuk.dev" title="More By Cheuk Ting Ho" class="p-name u-url">Cheuk Ting Ho</a></span>
            <p class="post__bio p-note">After having a career as a Data Scientist and Developer Advocate, Cheuk dedicated her work to the open-source community. She has co-founded Humble Data, a beginner Python workshop that has been happening around the world. She has served the EuroPython Society board for two years and is now a fellow and director of the Python Software Foundation.</p>
          
        </div>
      </div>
    

    <!--

If you use Disqus comments, just uncomment this block.
The only thing you need to change is "test-apkdzgmqhj" - which
should be replaced with your own Disqus site-id.

<div class="post__comments section-padding">
  <div class="grid-small">
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = 'https://cheuk.dev/2022/09/12/love-pandas/';
        this.page.identifier = 'https://cheuk.dev/2022/09/12/love-pandas/';
      };
      (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
  </div>
</div>
-->


  </article>
</div>

<!-- Links to Previous/Next posts -->


  <section class="related section-padding">
    <div class="grid-xlarge">
      <h2 class="related__title">Related</h2>
      <div class="related__container">
      
        
          
            
              
                <article class="related__post">
                  <a class="related__link" href="https://cheuk.dev/2023/06/30/python37-eol/">
                    
                      <figure class="related__img">
                        <img src="/assets/images/andy-holmes-zUor3ZmVbss-unsplash.jpg" alt="What does Python 3.7 End-of-life mean?"/>
                      </figure>
                    
                    <div>
                      <h2 class="related__text">What does Python 3.7 End-of-life mean?</h2>
                    </div>
                  </a>
                </article>
                
              
            
          
          
        
          
          
        
          
            
              
                <article class="related__post">
                  <a class="related__link" href="https://cheuk.dev/2022/06/06/trojan-source/">
                    
                      <figure class="related__img">
                        <img src="/assets/images/trojan-horse.png" alt="Trojan Source Code (Can we trust open-source anymore?)"/>
                      </figure>
                    
                    <div>
                      <h2 class="related__text">Trojan Source Code (Can we trust open-source anymore?)</h2>
                    </div>
                  </a>
                </article>
                
              
            
              
            
              
            
          
          
        
          
            
              
                <article class="related__post">
                  <a class="related__link" href="https://cheuk.dev/2020/07/20/shiny-app-python/">
                    
                      <figure class="related__img">
                        <img src="/assets/images/line_reg.gif" alt="Shiny App in Python? Bokeh + Jupyter notebook"/>
                      </figure>
                    
                    <div>
                      <h2 class="related__text">Shiny App in Python? Bokeh + Jupyter notebook</h2>
                    </div>
                  </a>
                </article>
                
              
            
              
            
              
            
          
          
            
      
        
      
      </div>
    </div>
  </section>

</main><div class="container footer-container">
  <p>
    Cheuk Ting Ho -
    <!-- <a href="mailto:" target="_blank"></a> -->
    
<a href="//" target="_blank" class=""></a>&nbsp;- building the open-source community</p>
</div>

<!-- Fathom - simple website analytics - https://usefathom.com -->
<script>
(function(f, a, t, h, o, m){
a[h]=a[h]||function(){
(a[h].q=a[h].q||[]).push(arguments)
};
o=f.createElement('script'),
m=f.getElementsByTagName('script')[0];
o.async=1; o.src=t; o.id='fathom-script';
m.parentNode.insertBefore(o,m)
})(document, window, 'https://cdn.usefathom.com/tracker.js', 'fathom');
fathom('set', 'siteId', 'HNKQJJRG');
fathom('trackPageview');
</script>
<!-- / Fathom -->
<!-- jQuery -->
<script src="/js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="/js/jquery.easing.min.js"></script>
<script src="/js/jquery.fittext.js"></script>
<script src="/js/wow.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/creative.js"></script>

<!-- Embed Medium posts -->
<!-- <script src="https://www.twilik.com/assets/retainable/rss-embed/retainable-rss-embed.js"></script> -->
<!-- No longer in use, see origin here https://medium.com/twilik/how-to-embed-medium-on-your-website-the-easy-way-41ac0a13231e -->


<!-- Posts -->


<script src="/assets/js/app.min.js"></script>

<script src="/js/webmention.js"></script>

</body>



</html>
